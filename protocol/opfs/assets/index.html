<!DOCTYPE html>

<head>
<meta charset="UTF-8">
<meta name="referrer" content="no-referrer">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OPFS</title>

<link rel="stylesheet" type="text/css" href="/default.css" />
<link rel="stylesheet" type="text/css" href="/opfs/style.css" />
<link rel="stylesheet" type="text/css" href="/material-symbols.css">
<link rel="preload" href="/material-symbols.woff2" as="font" type="font/woff2" crossorigin="anonymous" />

<script src="https://unpkg.com/mithril/mithril.js"></script>
<script>
  class MaterialSymbol extends HTMLElement {
    constructor() { super(); }
    connectedCallback() {
      this.innerHTML = `<span class="material-symbols">${this.getAttribute('name')}</span>`;
    }
  }
  customElements.define('material-symbol', MaterialSymbol);
</script>

</head>

<body>
  <h1>OPFS: Origin Private File System</h1>
  <section id="header"></section>
  <section id="main">
    <div class="grid-table directory"></div>
  </section>
  <section id="footer">
    <div class="horizontal-menu">
      <button id='command-reload'><material-symbol name="refresh"> Reload</button>
      &nbsp;
      <button id="command-delete" disabled="true"><material-symbol name="delete"> Delete</button>
      &nbsp; &nbsp;
      <span class="small">Open with ...</span>
      <button id="command-duckdb" disabled="true"><material-symbol name="database"> DuckDB</button>
    </div>

    <div>
      <b>Make directory</b><br>
      <input type="text" id="mkdir-name" autocomplete="off" placeholder="Directory name to create"></input>
      <button id="mkdir-mkdir"><material-symbol name="create_new_folder"> Create new directory</button>
    </div>

    <div>
      <b>Upload a local file</b><br>
      <input type="file" id="upload-file"></file>
      <span>Upload as: </span>
      <input type="text" id="upload-name" placeholder="File name to upload"></input>
      <button id="upload-upload" disabled><material-symbol name="upload"> Upload</button>
    </div>

    <div>
      <b>Simple Editor</b> (Load a file smaller than 64KiB with "Edit" action)<br>
      Name: <input type="text" id="editor-name" placeholder="File name to create or update" size="40"></input>
      <button id="editor-save"><material-symbol name="save_as"> Create or update a file</button>
      <button id="editor-clear"><material-symbol name="close"> Clear</button>
      <br>
      <textarea id="editor-edit"></textarea><br>
    </div>

    <div>
      <b>Download (NVGD) URL</b><br>
      <div id="download-panel">
        <input type="text" id="download-url" placeholder="URL to be downloaded (start with `http:` or `https:`)"></input>
        <span>
          <span>Download as:</span>
          <input type="text" id="download-as" placeholder="Name to save"></input>
        </span>
        <button id="download-download" disabled><material-symbol name="download_for_offline"> Download</button>
        <button id="download-clear" disabled><material-symbol name="close"> Clear</button>
      </div>
    </div>
  </section>

  <script src="/opfs/main.js"></script>
</body>

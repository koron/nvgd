<!DOCTYPE html>

<head>
<meta charset="UTF-8">
<meta name="referrer" content="no-referrer">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="/default.css">
<style>
{{ template "toopfs.css" . -}}
</style>
</head>

<body>
  <h1>Download to OPFS</h1>
  <section id="input-section">
    <label><input id="select-all" type="checkbox" checked></input><b>Select/unselect all</b></label>
    <ul class="file-selection">
      {{- range .Downloads }}
      <li><label><input type="checkbox" checked data-size="{{.Size}}" data-link="{{ .Link }}"></input><a href="{{ .Link }}">{{ .Name }}</a> ({{ .Size }} bytes)</label></li>
      {{- end }}
    </ul>
    <b>Total size:</b> <span id="total-size">0</span> bytes
    <div class="control">
    <div>
      <b>OPFS directory for downloads:</b>
      <input id="destdir" type="text" size="64" placeholder="(root)"></input>
      <button id="clear-destdir">Clear</button>
    </div>
    <div>
      <button id="download">Download</button>
    </div>
    </div>
  </section>

  <div id="download-cover" class="cover" style="display: none;">
    <div>
      <h4>Downloading...</h4>
      <label for="download-progress" id="download-message">...</label><br>
      <progress id="download-progress"></progress>
    </div>
  </div>
  <!--
  <br><hr>
  <section id="output-section">
    <h2>Progress</h22>
  </section>
  -->
</body>

<script>
{{ template "toopfs.js" . -}}
</script>
